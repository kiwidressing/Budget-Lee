# ê°€ê³„ë¶€ ì•± (Household Budget App)

ì™„ì „í•œ ê¸°ëŠ¥ì„ ê°–ì¶˜ ì›¹ ê¸°ë°˜ ê°€ê³„ë¶€ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. Cloudflare Pagesì™€ D1 ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•œ ì—£ì§€ ì»´í“¨íŒ… ê¸°ë°˜ ê°œì¸ ì¬ë¬´ ê´€ë¦¬ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

## ğŸŒ ì‹¤ì‹œê°„ ë°ëª¨

**ë¡œì»¬ ê°œë°œ ì„œë²„**: https://3000-ilfxg66dle2ykyvgdbe6r-c07dda5e.sandbox.novita.ai

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ğŸ“… ì›”ë³„ ë·° (Monthly View)
- **ì›”ê°„ í†µê³„ ì¹´ë“œ**: ìˆ˜ì…, ì§€ì¶œ, ì €ì¶•, ì”ì•¡ í•œëˆˆì— í™•ì¸
- **ë‹¬ë ¥ ì¸í„°í˜ì´ìŠ¤**: ë‚ ì§œë³„ ê±°ë˜ ì‹œê°í™” ë° ë¹ ë¥¸ ì…ë ¥
- **ê±°ë˜ ë‚´ì—­ ë¦¬ìŠ¤íŠ¸**: ë‚ ì§œë³„ ìƒì„¸ ë‚´ì—­ ì¡°íšŒ
- **ì˜ˆì‚° ì§„í–‰ë¥  ë°”**: ì¹´í…Œê³ ë¦¬ë³„ ì˜ˆì‚° ëŒ€ë¹„ ì‹¤ì œ ì§€ì¶œ ë¹„êµ

### 2. ğŸ“Š ì£¼ë³„ ë·° (Weekly View)
- ì£¼ê°„ ìˆ˜ì…/ì§€ì¶œ/ì €ì¶• í†µê³„
- ì´ì „ì£¼/ë‹¤ìŒì£¼ ë„¤ë¹„ê²Œì´ì…˜
- ì£¼ê°„ ê±°ë˜ ë‚´ì—­ ìƒì„¸ ë³´ê¸°

### 3. ğŸ· ì €ì¶• ê´€ë¦¬ (Savings)
- ë‹¤ì¤‘ ì €ì¶• í†µì¥ ê´€ë¦¬
- í†µì¥ë³„ ì”ì•¡ ì‹¤ì‹œê°„ ì§‘ê³„
- ì´ ì €ì¶•ì•¡ ëŒ€ì‹œë³´ë“œ
- ì €ì¶• í†µì¥ ì¶”ê°€/ì‚­ì œ ê¸°ëŠ¥

### 4. ğŸ”„ ê³ ì •ì§€ì¶œ ê´€ë¦¬ (Fixed Expenses)
- ì •ê¸°ì  ì§€ì¶œ ìŠ¤ì¼€ì¤„ ê´€ë¦¬
- **ì›”ë³„ ê³ ì •ì§€ì¶œ**: ë§¤ì›” Në²ˆì§¸ íŠ¹ì • ìš”ì¼ (ì˜ˆ: ë§¤ì›” ì²«ì§¸ ì£¼ ëª©ìš”ì¼)
- **ì£¼ë³„ ê³ ì •ì§€ì¶œ**: ë§¤ì£¼ íŠ¹ì • ìš”ì¼ (ì˜ˆ: ë§¤ì£¼ ê¸ˆìš”ì¼)
- ë°°ì§€ ì‹œìŠ¤í…œìœ¼ë¡œ ì£¼ê¸°/ì£¼ì°¨/ìš”ì¼ ì‹œê°í™”
- ìë™ ì§€ë¶ˆ ê¸°ëŠ¥

### 5. ğŸ’° ì˜ˆì‚° ê´€ë¦¬ (Budgets)
- ì¹´í…Œê³ ë¦¬ë³„ ì›”ë³„ ì˜ˆì‚° ì„¤ì •
- ì‹¤ì‹œê°„ ì˜ˆì‚° vs ì‹¤ì œ ì§€ì¶œ í˜„í™©
- ì§„í–‰ë¥  ìƒ‰ìƒ í‘œì‹œ (ì•ˆì „/ì–‘í˜¸/ì£¼ì˜/ì´ˆê³¼)
- 0ì› ì…ë ¥ ì‹œ ìë™ ì‚­ì œ

### 6. âš™ï¸ ì„¤ì • (Settings)
- ë‹¤ì¤‘ í†µí™” ì§€ì› (KRW, USD, EUR, JPY, AUD, GBP)
- ì´ˆê¸° ì”ì•¡/ì €ì¶•ì•¡ ì„¤ì •
- ì‚¬ìš©ì ì •ì˜ ì¹´í…Œê³ ë¦¬ ìƒ‰ìƒ

## ğŸ¨ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Hono** v4.10+ - ì´ˆê²½ëŸ‰ ì›¹ í”„ë ˆì„ì›Œí¬
- **TypeScript** - íƒ€ì… ì•ˆì „ì„±
- **Cloudflare Workers** - ì—£ì§€ ëŸ°íƒ€ì„
- **Cloudflare D1** - ë¶„ì‚° SQLite ë°ì´í„°ë² ì´ìŠ¤

### Frontend
- **Vanilla JavaScript** - ìˆœìˆ˜ JavaScript (1,744ì¤„)
- **TailwindCSS** (CDN) - ìœ í‹¸ë¦¬í‹° ìš°ì„  CSS
- **Font Awesome** - ì•„ì´ì½˜
- **Chart.js** - ë°ì´í„° ì‹œê°í™”
- **Axios** - HTTP í´ë¼ì´ì–¸íŠ¸

### Development Tools
- **Vite** - ë¹Œë“œ ë„êµ¬
- **Wrangler** - Cloudflare CLI
- **PM2** - í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 6ê°œ í…Œì´ë¸” êµ¬ì¡°

1. **settings** - ì•± ì „ì—­ ì„¤ì •
2. **savings_accounts** - ì €ì¶• í†µì¥
3. **transactions** - ê±°ë˜ ë‚´ì—­ (ìˆ˜ì…/ì§€ì¶œ/ì €ì¶•)
4. **fixed_expenses** - ê³ ì •ì§€ì¶œ ìŠ¤ì¼€ì¤„
5. **fixed_expense_payments** - ê³ ì •ì§€ì¶œ ì§€ë¶ˆ ê¸°ë¡
6. **category_budgets** - ì¹´í…Œê³ ë¦¬ë³„ ì˜ˆì‚°

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Node.js 18+
- npm ë˜ëŠ” yarn

### ì„¤ì¹˜ ë° ì‹¤í–‰

```bash
# 1. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 2. ë¡œì»¬ D1 ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
npm run db:migrate:local

# 3. í”„ë¡œì íŠ¸ ë¹Œë“œ
npm run build

# 4. ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev:sandbox

# ë˜ëŠ” PM2ë¡œ ì‹œì‘ (ê¶Œì¥)
npm run clean-port
pm2 start ecosystem.config.cjs
```

### ì ‘ì†
- ë¡œì»¬: http://localhost:3000

## ğŸ“ ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸

```bash
npm run dev              # Vite ê°œë°œ ì„œë²„
npm run dev:sandbox      # Wrangler Pages ê°œë°œ ì„œë²„ (ë¡œì»¬ D1)
npm run build            # í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run preview          # ë¹Œë“œ ë¯¸ë¦¬ë³´ê¸°
npm run deploy           # Cloudflare Pages ë°°í¬
npm run deploy:prod      # í”„ë¡œë•ì…˜ ë°°í¬ (í”„ë¡œì íŠ¸ëª… ì§€ì •)

# ë°ì´í„°ë² ì´ìŠ¤
npm run db:migrate:local # ë¡œì»¬ ë§ˆì´ê·¸ë ˆì´ì…˜
npm run db:migrate:prod  # í”„ë¡œë•ì…˜ ë§ˆì´ê·¸ë ˆì´ì…˜
npm run db:console:local # ë¡œì»¬ D1 ì½˜ì†”

# ìœ í‹¸ë¦¬í‹°
npm run clean-port       # í¬íŠ¸ 3000 ì •ë¦¬
npm test                 # ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
```

## ğŸŒ Cloudflare Pages ë°°í¬

### 1ë‹¨ê³„: Cloudflare API í‚¤ ì„¤ì •
```bash
# API í‚¤ë¥¼ í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì •í•˜ê±°ë‚˜
export CLOUDFLARE_API_TOKEN="your-api-token"

# ë˜ëŠ” wrangler login ì‚¬ìš©
npx wrangler login
```

### 2ë‹¨ê³„: í”„ë¡œë•ì…˜ D1 ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
```bash
npx wrangler d1 create webapp-production
```

### 3ë‹¨ê³„: wrangler.jsonc ì—…ë°ì´íŠ¸
```jsonc
{
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "webapp-production",
      "database_id": "ì—¬ê¸°ì—-ì‹¤ì œ-database-id-ì…ë ¥"
    }
  ]
}
```

### 4ë‹¨ê³„: í”„ë¡œë•ì…˜ ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
npm run db:migrate:prod
```

### 5ë‹¨ê³„: ë°°í¬
```bash
npm run deploy:prod
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
webapp/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.tsx              # Hono ë°±ì—”ë“œ API (536ì¤„, 24ê°œ ì—”ë“œí¬ì¸íŠ¸)
â”œâ”€â”€ public/
â”‚   â””â”€â”€ static/
â”‚       â”œâ”€â”€ app.js             # í”„ë¡ íŠ¸ì—”ë“œ JavaScript (1,744ì¤„)
â”‚       â””â”€â”€ style.css          # ì»¤ìŠ¤í…€ CSS
â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ 0001_initial_schema.sql
â”‚   â”œâ”€â”€ 0002_add_settings.sql
â”‚   â””â”€â”€ 0003_add_fixed_expenses_and_budgets.sql
â”œâ”€â”€ ecosystem.config.cjs       # PM2 ì„¤ì •
â”œâ”€â”€ wrangler.jsonc             # Cloudflare ì„¤ì •
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ README.md
```

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸ (24ê°œ)

### ì €ì¶• í†µì¥ (3ê°œ)
- `GET /api/savings-accounts` - ëª©ë¡ ì¡°íšŒ
- `POST /api/savings-accounts` - ìƒì„±
- `DELETE /api/savings-accounts/:id` - ì‚­ì œ

### ê±°ë˜ ë‚´ì—­ (5ê°œ)
- `GET /api/transactions` - ì¡°íšŒ (ë‚ ì§œ ë²”ìœ„)
- `GET /api/transactions/date/:date` - íŠ¹ì • ë‚ ì§œ ì¡°íšŒ
- `POST /api/transactions` - ìƒì„±
- `PUT /api/transactions/:id` - ìˆ˜ì •
- `DELETE /api/transactions/:id` - ì‚­ì œ

### í†µê³„ (3ê°œ)
- `GET /api/statistics/monthly/:yearMonth` - ì›”ë³„ í†µê³„
- `GET /api/statistics/weekly/:startDate` - ì£¼ë³„ í†µê³„
- `GET /api/calendar/:yearMonth` - ë‹¬ë ¥ ë°ì´í„°

### ì„¤ì • (2ê°œ)
- `GET /api/settings` - ì¡°íšŒ
- `PUT /api/settings` - ìˆ˜ì •

### ê³ ì •ì§€ì¶œ (5ê°œ)
- `GET /api/fixed-expenses` - ëª©ë¡ ì¡°íšŒ
- `POST /api/fixed-expenses` - ìƒì„±
- `DELETE /api/fixed-expenses/:id` - ì‚­ì œ
- `POST /api/fixed-expenses/:id/pay` - ì§€ë¶ˆ ì²˜ë¦¬
- `GET /api/fixed-expenses/:id/payments/:yearMonth` - ì§€ë¶ˆ ë‚´ì—­

### ì˜ˆì‚° (4ê°œ)
- `GET /api/budgets` - ëª©ë¡ ì¡°íšŒ
- `PUT /api/budgets/:category` - ì„¤ì •/ìˆ˜ì • (UPSERT)
- `DELETE /api/budgets/:category` - ì‚­ì œ
- `GET /api/budgets/vs-spending/:yearMonth` - ì˜ˆì‚° vs ì§€ì¶œ í˜„í™©

## ğŸ’¡ í•µì‹¬ ì•Œê³ ë¦¬ì¦˜

### ê³ ì •ì§€ì¶œ ë‚ ì§œ ê³„ì‚°
```javascript
// Në²ˆì§¸ íŠ¹ì • ìš”ì¼ ì°¾ê¸° (ì˜ˆ: ë§¤ì›” ì²«ì§¸ ì£¼ ëª©ìš”ì¼)
function getNthDayOfMonth(year, month, nth, dayOfWeek) {
  let date = new Date(year, month, 1);
  let count = 0;
  
  while (date.getMonth() === month) {
    if (date.getDay() === dayOfWeek) {
      count++;
      if (count === nth) return new Date(date);
    }
    date.setDate(date.getDate() + 1);
  }
  return null;
}
```

### ì”ì•¡ ê³„ì‚°
```
ì”ì•¡ = initial_balance + SUM(ìˆ˜ì…) - SUM(ì§€ì¶œ) - SUM(ì €ì¶•)
```

### ì˜ˆì‚° ì§„í–‰ë¥  ìƒ‰ìƒ
```javascript
function getBudgetColor(percentage) {
  if (percentage < 50) return '#10B981';   // ì´ˆë¡ (ì•ˆì „)
  if (percentage < 80) return '#F59E0B';   // ë…¸ë‘ (ì–‘í˜¸)
  if (percentage <= 100) return '#F97316'; // ì£¼í™© (ì£¼ì˜)
  return '#EF4444';                        // ë¹¨ê°• (ì´ˆê³¼)
}
```

## ğŸ¯ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì¼ë°˜ ì‚¬ìš©ì
1. ë§¤ì¼ ì§€ì¶œ ì…ë ¥ (ë‹¬ë ¥ì—ì„œ ë‚ ì§œ í´ë¦­ â†’ ê±°ë˜ ì¶”ê°€)
2. ì›”ë§ í†µê³„ í™•ì¸ (ì¹´í…Œê³ ë¦¬ë³„ ì§€ì¶œ ë¶„ì„)
3. ë‹¤ìŒ ë‹¬ ì˜ˆì‚° ì„¤ì • (ì˜ˆì‚° íƒ­)

### ì²´ê³„ì  ê´€ë¦¬ì
1. ê³ ì •ì§€ì¶œ ë“±ë¡ (ì›”ì„¸, í†µì‹ ë¹„ ë“±)
2. ì €ì¶• í†µì¥ ë¶„ë¦¬ ê´€ë¦¬ (ë¹„ìƒê¸ˆ, ëª©ëˆë§ˆë ¨ ë“±)
3. ì£¼ê°„ ë¦¬ë·° (ì£¼ë³„ íƒ­ì—ì„œ ì§€ì¶œ íŒ¨í„´ ë¶„ì„)

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¥˜
```bash
# ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤ ë¦¬ì…‹
rm -rf .wrangler/state/v3/d1
npm run db:migrate:local
```

### í¬íŠ¸ ì¶©ëŒ
```bash
# í¬íŠ¸ ì •ë¦¬ í›„ ì¬ì‹œì‘
npm run clean-port
pm2 restart webapp
```

### ë¹Œë“œ ì˜¤ë¥˜
```bash
# node_modules ì¬ì„¤ì¹˜
rm -rf node_modules package-lock.json
npm install
npm run build
```

## ğŸ“š ì¶”ê°€ ìë£Œ

- [Hono Documentation](https://hono.dev/)
- [Cloudflare D1 Docs](https://developers.cloudflare.com/d1/)
- [Cloudflare Pages Docs](https://developers.cloudflare.com/pages/)

## ğŸ¤ ê¸°ì—¬

ì´ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ ì¬ë¬´ ê´€ë¦¬ë¥¼ ìœ„í•œ ì˜¤í”ˆì†ŒìŠ¤ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

## ğŸ‰ ì™„ë£Œëœ ê¸°ëŠ¥

- âœ… ì›”ë³„/ì£¼ë³„ ë·°
- âœ… ê±°ë˜ ë‚´ì—­ ê´€ë¦¬ (ìˆ˜ì…/ì§€ì¶œ/ì €ì¶•)
- âœ… ì €ì¶• í†µì¥ ë‹¤ì¤‘ ê´€ë¦¬
- âœ… ê³ ì •ì§€ì¶œ ìŠ¤ì¼€ì¤„ ê´€ë¦¬
- âœ… ì¹´í…Œê³ ë¦¬ë³„ ì˜ˆì‚° ê´€ë¦¬
- âœ… ë‹¤ì¤‘ í†µí™” ì§€ì›
- âœ… ë‹¬ë ¥ ì¸í„°í˜ì´ìŠ¤
- âœ… ì‹¤ì‹œê°„ í†µê³„ ëŒ€ì‹œë³´ë“œ

## ğŸš§ í–¥í›„ ê³„íš

- [ ] ì°¨íŠ¸ ì‹œê°í™” ê°œì„ 
- [ ] ë°ì´í„° ë‚´ë³´ë‚´ê¸° (CSV/JSON)
- [ ] ëª¨ë°”ì¼ ì•± (PWA)
- [ ] ë‹¤ì¤‘ ì‚¬ìš©ì ì§€ì›
- [ ] AI ê¸°ë°˜ ì§€ì¶œ ì˜ˆì¸¡
- [ ] ì˜ìˆ˜ì¦ OCR ìŠ¤ìº”

---

**Built with â¤ï¸ using Cloudflare Pages and Hono**
